<html>
<head>
<title>「白窓君」クローン基板およびケース</title>
</head>
<body>
<h1>「白窓君」クローン基板およびケース</h1>
<p><img width="50%" height="auto" alt="組立例" src="./images/Shiromado-kun-CF.jpg"</p>

<p>たんぼ氏(<a href="https://twitter.com/h_koma2">@h_koma2</a>)が開発された「白窓君」の私家版クローンに関する情報をまとめています。<br>
<a href="../USB2ATARI/USB2ATARI.html">USB joypad to X680x0</a>へつないでおくための白窓君を追加購入しようとしたのですが品切れしており、在庫補充を待ちきれずに自分用に製作したものになります。<br>
白窓君の代替として使えることを目指してはいますが、元々が自分専用であるため、万人向けとなるよう考慮されたものではありません。
</p>
	
<p>原作についての情報は<a href="http://tnb216.html.xdomain.jp/">TNB製作所</a>のページをご確認ください。<br>
また、<a href="https://tnb216.booth.pm/items/2700441">TNB製作所's BOOTH</a>にて、たんぼ氏の手による、いわゆる純正品を購入することができます。
</p>

<a name="schematic"></a>
<h2>回路図および部品配置</h2>
<a href="./images/schematic.png"><img width="30%" height="auto" alt="回路図" src="./images/schematic.png"></a>
<a href="./images/parts_location_top.png"><img width="15%" height="auto" alt="天面部品配置" src="./images/parts_location_top.png"></a>

<h2>純正品との差異</h2>
本作はTNB製作所のページにて公開されているRev.Dの回路図を参考にしていますが、以下が異なります。
<ul>
	<li>液晶モジュールが異なる<br>
		純正品ではSunlike Display Tech.社のSC1602を使用していますが、本作では同社製のSD1602を使用しています。<br>
		このため、実物で確認した限りでは、視野角が若干狭くなっています。<br>
		また、画素の横幅が若干狭いため、文字のバランスが異なって表示されます。
	<li>受信バッファと液晶モジュール間の外付けプルアップ抵抗を省略している<br>
		SD1602に搭載されたICがデータシート通りにST7706UまたはHD44780であるならば、E端子以外の入力は内部でプルアップされている筈で、外部プルアップは省略可能という判断によるものです。
	<li>液晶モジュールのE端子をプルダウンしている<br>
		他の入力端子がフローティング状態、かつ、E端子がHレベルと認識された場合に誤動作の原因となるため、E端子をプルダウンしています。<br>
		ただし、実際にはプルダウン抵抗は不要です(下記参照)。
</ul>
なお、X680x0またはUSB joypad to X680x0に直結する場合、以下の理由でR2～R9は実装しません。<br>
基板上にはパッドを残してありますが、他の用途で改造する用途のものです。
<ul>
	<li>R2～R8<br>
		X680x0に直結する場合、X680x0側にプルアップ抵抗が実装されているため、白窓君側のプルアップ抵抗は必須ではありません。<br>
		USB joypad to X680x0に直結する場合は各端子がフローティング状態にならないよう処理されるため、プルアップ抵抗は必須ではありません。
	<li>R9<br>
		本基板上のU1(TC74HCT244AP)および上記によりE端子はフローティング状態にはならないため、プルダウン抵抗は不要です。
</ul>

<a name="parts_list"></a>
<h2>部品一覧</h2>
<table cellspacing="3" bordercolor="#484848" border="1">
	<tbody>
		<tr>
			<th>配置番号</th>
			<th>部品名または型名や仕様</th>
			<th>秋月電子の通販コード</th>
			<th>解説</th>
		</tr>
		<tr>
			<th>-</th>
			<th>専用基板</th>
			<th>-</th>
			<th><a href="https://kanigarage.booth.pm/items/4794931">BOOTHにて頒布予定です</a>。
				<a href="./images/board.jpg"><img width="25%" height="auto" alt="専用基板" src="./images/board.jpg"></a>
			</th>
		</tr>
		<tr>
			<th>-</th>
			<th>M1.7かM1.6のネジやスペーサー類</th>
			<th>-</th>
			<th>専用ケースに組み込む場合、長さ4mmのM1.6タッピングねじが6本必要です。
			</th>
		</tr>
		<tr>
			<th>-</th>
			<th>接続ケーブル</th>
			<th>C-00004</th>
			<th>片側がDE-9レセプタクル、他端がDE-9プラグのストレート結線のケーブルが必要です。<br>
				EIA-574(9ピンタイプのRS-232)のストレート延長ケーブルや、メガドライブのパッド用延長ケーブルを利用できます。
			</th>
		</tr>
		<tr>
			<th>-</th>
			<th>Sunlike Display Tech.製 SD1602V</th>
			<th>P-02985</th>
			<th>ピン配置や形状が紛らわしい物が多いので、指定品以外を使う場合には念入りに確認してください。<br>
				例えば SD1602H(P-01675 や P-01797)を接続しても動作はしますが、ネジ穴位置が異なるため、専用ケースには組み込めません。
			</th>
		</tr>
		<tr>
			<th>U1</th>
			<th>東芝製 TC74HCT244AP</th>
			<th>-</th>
			<th></th>
		</tr>
		<tr>
			<th>C1</th>
			<th>0.1uFで耐圧16V以上の積層セラミックコンデンサ</th>
			<th>P-04064</th>
			<th></th>
		</tr>
		<tr>
			<th>C2</th>
			<th>47uF～100uFで耐圧16V以上の積層セラミックコンデンサまたは電解コンデンサ</th>
			<th>P-10270</th>
			<th></th>
		</tr>
		<tr>
			<th>F1</th>
			<th>リセッタブルヒューズ MF-R010</th>
			<th>P-12911</th>
			<th>(参考)R2～R9が実装されていない状態での消費電流は16mA程でした。<br>
				つまり、MF-R010より定格の小さいリセッタブルヒューズを選択可能です。
			</th>
		</tr>
		<tr>
			<th>J1</th>
			<th>半田付け式ボードロックを有する、ライトアングル(水平取付)DE-9レセプタクル</th>
			<th>-</th>
			<th>【部品の例】<br>
				LinkMan  3223DB9RS1S2 や 3223DB9RS1G1E<br>
				RS-PRO  239-5855<br>
				TE  5747844-4
			</th>
		</tr>
		<tr>
			<th>J2</th>
			<th>分割ピンソケット FHU-1x42SG</th>
			<th>C-05779</th>
			<th>必要なピン数に切って使います。</th>
		</tr>
		<tr>
			<th>VR1</th>
			<th>半固定抵抗 TSR-065-203-R</th>
			<th>P-06064</th>
			<th>20kΩ Bカーブ<br>
				液晶画面のコントラスト調整に使います。
			</th>
		</tr>
	</tbody>
</table>

<h3>秋月電子でSD1602Vを購入した場合には付属している筈なので購入が不要な部品</h3>
<table cellspacing="3" bordercolor="#484848" border="1">
	<tbody>
		<tr>
			<th>配置番号</th>
			<th>部品名または型名や仕様</th>
			<th>秋月電子の通販コード</th>
			<th>解説</th>
		</tr>
		<tr>
			<th>-</th>
			<th>分割ピンヘッダ PH-1x40SG</th>
			<th>P-00167</th>
			<th>上記J2のオス側</th>
		</tr>
		<tr>
			<th>R1</th>
			<th></th>
			<th>-</th>
			<th>LEDバックライトの電流制限抵抗です。<br>
				SD1602Vのデータシートを確認して、値を選定してください。
			</th>
		</tr>
	</tbody>
</table>

<h3>前述の理由で実装しない部品</h3>
<table cellspacing="3" bordercolor="#484848" border="1">
	<tbody>
		<tr>
			<th>配置番号</th>
			<th>部品名または型名や仕様</th>
			<th>秋月電子の通販コード</th>
			<th>解説</th>
		</tr>
		<tr>
			<th>R2～R9</th>
			<th></th>
			<th></th>
			<th></th>
		</tr>
<!--
		<tr>
			<th>R2～R8</th>
			<th>10k～47kΩくらいの1/4Wカーボン抵抗</th>
			<th>R-25223</th>
			<th>集合抵抗モジュールでも可</th>
		</tr>
		<tr>
			<th>R9</th>
			<th>47k～470kΩくらいの1/4Wカーボン抵抗</th>
			<th>R-25474</th>
			<th>フローティング状態を防げれば良いので、極端に小さい値でなければ目的を達せられます。</th>
		</tr>
	-->
	</tbody>
</table>

<h2>組み立てにおいて特に留意すべき点</h2>
<a href="./images/rough_surface.jpg"><img width="30%" height="auto" alt="面荒れ注意" src="./images/rough_surface.jpg"></a>
<a href="./images/assembly2.jpg"><img width="18%" height="auto" alt="組立て例2" src="./images/assembly2.jpg"></a>
<ul>
	<li>基板側面にVカット跡が残っています。<br>
		怪我を防ぐために、ヤスリで削って滑らかにしておいてください。
	<li>SD1602Vを接続するためのピンヘッダおよびピンソケット(J2)は傾かないように垂直に取り付けてください。<br>
		傾いた状態ではケースに組み込めません。
	<li>SD1602Vに隠れる位置にある部品の実装高さに気をつけてください。<br>
		殆どの場合で、C2(コンデンサ)は横に寝かせて取り付けることになる筈です。
</ul>

<h2>調整が必要な箇所</h2>
本回路で必要な箇所は液晶のコントラスト調整に使うVR1のみです。<br>
電源電圧の微妙な差異で調整が変わる箇所ですので、実際に使用する機器およびケーブルに接続した状態で調整してください。

<a name="enclosure"></a>
<h2>専用ケースについての注意事項</h2>
<a href="./images/enclosure.jpg"><img width="30%" height="auto" alt="専用試作ケース" src="./images/enclosure.jpg"></a>
<a href="./images/assembly1.jpg"><img width="30%" height="auto" alt="組立て例1" src="./images/assembly1.jpg"></a>
<a href="./images/latch.png"><img width="30%" height="auto" alt="分解用スリット" src="./images/latch.png"></a>

<p>3Dプリンタ出力品ですので、いわゆるガンプラのような精度を有していません。
<ul>
	<li>お湯を使った部品の歪みの修正
	<li>仮組みによる確認
	<li>すり合わせの調整
	<li>気泡埋めや傷取りなどの表面処理
</ul>
といった「ガレージキットの基本的な作法」を暗黙の内に要求します。
</p>
<p>
また、ケースに組み込んだ状態でのコントラスト調整はできないため、
必ずケースに組み込む前に動作確認や調整を済ませる必要があります。<br>
どうしても分解が必要になった場合に備えて、ケース左側面に隙間を用意してあります。<br>
この隙間とDE-9コネクタ上面の段差を利用して開けてください。
</p>
<p>
SD1602Vをフロントパネルにネジ止めする場合、ネジは少し緩めに止めてください(締まり始める位置から1/8～1/4回転程度戻す感じ)。<br>
J2の取り付け誤差をこの緩みで吸収する意図です。<br>
</p>
<p>
SD1602Hを組み込むことはできません。<br>
フロントパネルのネジ穴の位置が違うだけでなく、フィルムケーブルを破損する恐れがあるためです。
</p>

<a name="board_dimensions"></a>
<h2>ケースを自作するための寸法情報</h2>
<a href="./images/board_dimensions.png"><img width="30%" height="auto" alt="基板寸法図" src="./images/board_dimensions.png"></a>

<p>Vカット線以外の基板外形線は全て0.5mmグリッド上に乗るように設計してあります。<br>
以下、明示しない限り、
<ul>
	<li>DE-9レセプタクル(J1)を右向きにした状態
	<li>基板左上隅が原点
	<li>X軸は右向きが正
	<li>Y軸は下向きが正
</ul>
とします。
<ul>
	<li>基板サイズ 90.0mm × 32.0mm × 1.6mm<br>
		Vカットの切り代が0.5～1.0mmあるため、幅(Y軸方向)は設計値よりも0.5～2.0mm大きくなる
	<li>基板四隅の面取り半径 3.0mm
	<li>DE-9レセプタクル側を 2.0mm × 16.0mm 切り欠いてある<br>
		この箇所の面取り半径は 1.0mmなので最狭部は 14.0mmとなる
	<li>SD1602の画面窓は<br>
		(9.0, 8.5) (61.0, 8.5) (61.0, 24.5) (9.0, 24.5)の内側16.0mm × 52.0mmの矩形となる
	<li>SD1602Vの取り付けボスの位置は<br>
		(4.0, 5.0) (66.0, 5.0) (66.0, 27.0) の3箇所<br>
		穴サイズは1.8mmφ
</ul>
</p>
</body>
</html>